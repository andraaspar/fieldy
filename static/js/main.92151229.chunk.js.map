{"version":3,"sources":["model/Format.ts","model/MessageLevel.ts","model/NumberType.ts","store/FieldsStore.ts","fun/evaluateFields.ts","model/inputAreaFocus.ts","fun/makeNewField.ts","asset/icon/bullseye.svg","asset/icon/circle.svg","asset/icon/clipboard.svg","asset/icon/edit.svg","asset/icon/exclamation-circle-fill.svg","asset/icon/exclamation-triangle.svg","asset/icon/grip-horizontal.svg","asset/icon/hr.svg","asset/icon/info-square.svg","asset/icon/plus.svg","asset/icon/x.svg","model/enterValue.ts","style/class/rowCss.ts","comp/IconComp.tsx","comp/FieldComp.tsx","style/styleConstants.ts","comp/FieldsAreaComp.tsx","style/class/colCss.ts","comp/InputAreaComp.tsx","comp/AppComp.tsx","serviceWorker.ts","index.tsx"],"names":["Format","MessageLevel","NumberType","FieldsStore","Store","JSON","parse","decodeURIComponent","window","location","hash","slice","e","loadFromHash","nextFieldIndex","fieldsById","fieldsOrder","selectedFieldId","undefined","subscribe","s","history","replaceState","encodeURIComponent","stringify","mathNumber","create","all","precision","epsilon","mathDecimal","number","mathFraction","messages","t","typed","conversions","unshift","from","to","convert","f","fractionToDecimal","d","decimalToFraction","n","numberToFraction","numberToDecimal","evaluateFields","update","scope","fieldId","field","hasDecimalValue","hasFractionValue","hasNumberValue","name","id","Error","expression","tempScope","scopeProxy","Proxy","proxyHandler","node","numberType","DECIMAL","FRACTION","constantNodes","filter","isConstantNode","constantNode","isNumber","value","Decimal","Fraction","symbolNodes","isSymbolNode","symbolNode","evaluate","isFunction","replace","format","toFraction","FRACTION_WITH_WHOLE","PERCENT","mul","round","valueOf","DECIMAL_WITH_REPEAT","toString","notation","simplify","Math","error","push","v4","level","ERROR","message","length","InputAreaFocusTarget","set","target","newValue","receiver","Reflect","deleteProperty","WARNING","bignumber","decimal","toNumber","inputAreaFocus","setInputAreaFocus","v","makeNewField","o","requestAnimationFrame","NAME","_extends","Object","assign","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","fillRule","_ref3","_ref4","_ref5","_ref","svgRef","title","props","viewBox","ref","ForwardRef","forwardRef","cx","cy","r","enterValue","setEnterValue","fn","rowAutoWrapCss","IconComp","className","iconCss","_className","_title","_icon","display","verticalAlign","width","height","svg","fill","FieldComp","useState","_fieldId","draggableId","index","_index","provided","snapshot","innerRef","draggableProps","fieldCss","fieldSelectedCss","dragHandleProps","ICON_SVG","grip","fieldNameCss","onClick","ctrlKey","valueCss","EXP","navigator","clipboard","writeText","copy","fraction","map","warning","info","errorCss","warningCss","style","marginLeft","splice","delete","flex","borderRadius","border","padding","gap","alignItems","backgroundColor","FieldsAreaComp","$id","fieldIds","onDragEnd","useCallback","result","oldIndex","newIndex","destination","item","droppableId","droppableProps","placeholder","add","colAutoCss","InputAreaComp","nameFieldRef","useRef","expFieldRef","updateField","useLayoutEffect","focus","bind","inputAreaCss","labeledControlCss","labelCss","disabled","nameFieldCss","onChange","currentTarget","expLabeledCss","expFieldCss","onFocus","setTimeout","onBlur","onKeyUp","openingCount","match","closingCount","hasLessOpeningBrackets","parseInt","NUMBER","fontFamily","overflow","maxWidth","textAlign","fontSize","color","current","start","selectionStart","end","selectionEnd","setSelectionRange","AppComp","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.92151229.chunk.js","sourcesContent":["export enum Format {\n\tDECIMAL,\n\tDECIMAL_WITH_REPEAT,\n\tFRACTION,\n\tFRACTION_WITH_WHOLE,\n\tPERCENT,\n}\n","export enum MessageLevel {\n\tINFO,\n\tWARNING,\n\tERROR,\n\tSUCCESS,\n}\n","export enum NumberType {\n\tNUMBER,\n\tDECIMAL,\n\tFRACTION,\n}\n","import { Store } from 'pullstate'\nimport { Field } from '../model/Field'\n\nexport interface IFieldsStore {\n\tfieldsById: { [k: string]: Field }\n\tfieldsOrder: string[]\n\tselectedFieldId: string | undefined\n\tnextFieldIndex: number\n}\n\nexport const FieldsStore = new Store<IFieldsStore>(\n\tloadFromHash() || {\n\t\tnextFieldIndex: 1,\n\t\tfieldsById: {},\n\t\tfieldsOrder: [],\n\t\tselectedFieldId: undefined,\n\t},\n)\n\nfunction loadFromHash(): IFieldsStore | null {\n\ttry {\n\t\treturn JSON.parse(decodeURIComponent(window.location.hash.slice(1)))\n\t} catch (e) {\n\t\treturn null\n\t}\n}\n\nFieldsStore.subscribe(\n\t(s) => s,\n\t(s) => {\n\t\twindow.history.replaceState(\n\t\t\tundefined,\n\t\t\t'',\n\t\t\t`#${encodeURIComponent(JSON.stringify(s))}`,\n\t\t)\n\t},\n)\n","import { Decimal } from 'decimal.js'\nimport Fraction from 'fraction.js'\nimport { isFunction, isNumber } from 'lodash'\nimport { all, create } from 'mathjs'\nimport { v4 } from 'uuid'\nimport { Format } from '../model/Format'\nimport { Message } from '../model/Message'\nimport { MessageLevel } from '../model/MessageLevel'\nimport { NumberType } from '../model/NumberType'\nimport { FieldsStore } from '../store/FieldsStore'\n\ntype TScope = Record<string | number | symbol, unknown>\n\nconst PRECISION = 64\nconst EPSILON = 0.0000000001\n\nconst mathNumber = create(all, {\n\tprecision: PRECISION,\n\tepsilon: EPSILON,\n})\nconst mathDecimal = create(all, {\n\tnumber: 'BigNumber',\n\tprecision: PRECISION,\n\tepsilon: EPSILON,\n})\nconst mathFraction = create(all, {\n\tnumber: 'Fraction',\n\tprecision: PRECISION,\n\tepsilon: EPSILON,\n})\nlet messages: Message[] = []\nfor (const math of [mathNumber, mathDecimal, mathFraction]) {\n\tconst t = math.typed as any\n\tt.conversions.unshift({\n\t\tfrom: 'Fraction',\n\t\tto: 'BigNumber',\n\t\t// eslint-disable-next-line\n\t\tconvert(f: Fraction) {\n\t\t\treturn fractionToDecimal(f)\n\t\t},\n\t})\n\tt.conversions.unshift({\n\t\tfrom: 'BigNumber',\n\t\tto: 'Fraction',\n\t\t// eslint-disable-next-line\n\t\tconvert(d: Decimal) {\n\t\t\treturn decimalToFraction(d)\n\t\t},\n\t})\n\tt.conversions.unshift({\n\t\tfrom: 'number',\n\t\tto: 'Fraction',\n\t\t// eslint-disable-next-line\n\t\tconvert(n: number) {\n\t\t\treturn numberToFraction(n)\n\t\t},\n\t})\n\tt.conversions.unshift({\n\t\tfrom: 'number',\n\t\tto: 'BigNumber',\n\t\t// eslint-disable-next-line\n\t\tconvert(n: number) {\n\t\t\treturn numberToDecimal(n)\n\t\t},\n\t})\n\t// t.conversions.unshift({\n\t// \tfrom: 'BigNumber',\n\t// \tto: 'number',\n\t// \t// eslint-disable-next-line\n\t// \tconvert(d: Decimal) {\n\t// \t\treturn decimalToNumber(d)\n\t// \t},\n\t// })\n\t// t.conversions.unshift({\n\t// \tfrom: 'Fraction',\n\t// \tto: 'number',\n\t// \t// eslint-disable-next-line\n\t// \tconvert(f: Fraction) {\n\t// \t\treturn fractionToNumber(f)\n\t// \t},\n\t// })\n}\n\nexport function evaluateFields() {\n\tFieldsStore.update((s) => {\n\t\tconst scope: TScope = {}\n\t\tfor (const fieldId of s.fieldsOrder) {\n\t\t\tconst field = s.fieldsById[fieldId]\n\t\t\ttry {\n\t\t\t\tmessages = []\n\t\t\t\tfield.hasDecimalValue = false\n\t\t\t\tfield.hasFractionValue = false\n\t\t\t\tfield.hasNumberValue = false\n\t\t\t\tconst name = field.name || field.id\n\t\t\t\tif (name in scope) {\n\t\t\t\t\tthrow new Error(`Duplicate name: ${name}`)\n\t\t\t\t}\n\t\t\t\tif (field.expression) {\n\t\t\t\t\tconst tempScope: TScope = { ...scope }\n\t\t\t\t\tconst scopeProxy = new Proxy(tempScope, proxyHandler)\n\t\t\t\t\tconst node = (field.numberType === NumberType.DECIMAL\n\t\t\t\t\t\t? mathDecimal\n\t\t\t\t\t\t: field.numberType === NumberType.FRACTION\n\t\t\t\t\t\t? mathFraction\n\t\t\t\t\t\t: mathNumber\n\t\t\t\t\t).parse?.(field.expression)\n\t\t\t\t\tif (node) {\n\t\t\t\t\t\tconst constantNodes = node.filter((node) => node.isConstantNode)\n\t\t\t\t\t\tfor (const constantNode of constantNodes) {\n\t\t\t\t\t\t\tif (isNumber(constantNode.value)) {\n\t\t\t\t\t\t\t\tfield.hasNumberValue = true\n\t\t\t\t\t\t\t} else if (constantNode.value instanceof Decimal) {\n\t\t\t\t\t\t\t\tfield.hasDecimalValue = true\n\t\t\t\t\t\t\t} else if (constantNode.value instanceof Fraction) {\n\t\t\t\t\t\t\t\tfield.hasFractionValue = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst symbolNodes = node.filter((node) => node.isSymbolNode)\n\t\t\t\t\t\tfor (const symbolNode of symbolNodes) {\n\t\t\t\t\t\t\tif (symbolNode.name === 'number') {\n\t\t\t\t\t\t\t\tfield.hasNumberValue = true\n\t\t\t\t\t\t\t} else if (symbolNode.name === 'bignumber') {\n\t\t\t\t\t\t\t\tfield.hasDecimalValue = true\n\t\t\t\t\t\t\t} else if (symbolNode.name === 'fraction') {\n\t\t\t\t\t\t\t\tfield.hasFractionValue = true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscope[name] = node.evaluate(scopeProxy)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscope[name] = 0\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tscope[name] = 0\n\t\t\t\t}\n\t\t\t\tconst value = scope[name]\n\t\t\t\tif (isFunction(value)) {\n\t\t\t\t\tfield.value = `𝑓(${field.expression\n\t\t\t\t\t\t.replace(/.*\\((.*?)\\).+/m, '$1')\n\t\t\t\t\t\t.replace(/,\\s*/g, ', ')})`\n\t\t\t\t} else if (value instanceof Fraction) {\n\t\t\t\t\tswitch (field.format) {\n\t\t\t\t\t\tcase Format.FRACTION:\n\t\t\t\t\t\t\tfield.value = value.toFraction()\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Format.FRACTION_WITH_WHOLE:\n\t\t\t\t\t\t\tfield.value = value.toFraction(true)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Format.PERCENT:\n\t\t\t\t\t\t\tfield.value = `${value.mul(100).round().valueOf()}%`\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Format.DECIMAL_WITH_REPEAT:\n\t\t\t\t\t\t\tfield.value = value.toString()\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Format.DECIMAL:\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tfield.value = mathDecimal.format!(fractionToDecimal(value), {\n\t\t\t\t\t\t\t\tnotation: 'fixed',\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t} else if (value instanceof Decimal) {\n\t\t\t\t\tswitch (field.format) {\n\t\t\t\t\t\tcase Format.FRACTION: {\n\t\t\t\t\t\t\tfield.value = decimalToFraction(value).toFraction()\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase Format.FRACTION_WITH_WHOLE: {\n\t\t\t\t\t\t\tfield.value = decimalToFraction(value).toFraction(true)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase Format.PERCENT: {\n\t\t\t\t\t\t\tfield.value = `${value.mul(100).round().valueOf()}%`\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase Format.DECIMAL_WITH_REPEAT: {\n\t\t\t\t\t\t\tfield.value = decimalToFraction(value).toString()\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase Format.DECIMAL:\n\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\tfield.value = mathDecimal.format!(value, { notation: 'fixed' })\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (isNumber(value)) {\n\t\t\t\t\tswitch (field.format) {\n\t\t\t\t\t\tcase Format.FRACTION:\n\t\t\t\t\t\t\tfield.value = new Fraction(value).simplify().toFraction()\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Format.FRACTION_WITH_WHOLE:\n\t\t\t\t\t\t\tfield.value = new Fraction(value).simplify().toFraction(true)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Format.PERCENT:\n\t\t\t\t\t\t\tfield.value = `${Math.round(value * 100)}%`\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Format.DECIMAL_WITH_REPEAT:\n\t\t\t\t\t\t\tfield.value = new Fraction(value).simplify().toString()\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tcase Format.DECIMAL:\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tfield.value = value + ''\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfield.value = mathDecimal.format!(value)\n\t\t\t\t}\n\t\t\t\tdelete field.error\n\t\t\t} catch (e) {\n\t\t\t\tfield.value = ''\n\t\t\t\tfield.error = true\n\t\t\t\tmessages.push({\n\t\t\t\t\tid: v4(),\n\t\t\t\t\tlevel: MessageLevel.ERROR,\n\t\t\t\t\tmessage: (e + '').replace(/^(?:Type|Syntax)?Error:\\s*/gi, ''),\n\t\t\t\t})\n\t\t\t\t// console.error(e)\n\t\t\t}\n\t\t\tfield.messages = messages.length ? messages : undefined\n\t\t}\n\t})\n}\n\nconst proxyHandler: ProxyHandler<TScope> = {\n\tset(target, name, newValue, receiver) {\n\t\tif (!(name in target)) return Reflect.set(target, name, newValue, receiver)\n\t\tconst oldValue = target[name as any]\n\t\tif (oldValue === newValue) return true\n\t\tthrow new Error(\n\t\t\t`Cannot redefine constant: ${typeof name === 'symbol' ? 'symbol' : name}`,\n\t\t)\n\t},\n\tdeleteProperty(target, name) {\n\t\tif (!(name in target)) return true\n\t\tthrow new Error(\n\t\t\t`Cannot delete constant: ${typeof name === 'symbol' ? 'symbol' : name}`,\n\t\t)\n\t},\n}\n\nfunction fractionToDecimal(f: Fraction): Decimal {\n\tmessages.push({\n\t\tid: v4(),\n\t\tlevel: MessageLevel.WARNING,\n\t\tmessage: `Fraction → BigNumber conversion: potential loss of precision.`,\n\t})\n\treturn mathDecimal.bignumber!(f)\n}\n\nfunction decimalToFraction(decimal: Decimal): Fraction {\n\tmessages.push({\n\t\tid: v4(),\n\t\tlevel: MessageLevel.WARNING,\n\t\tmessage: `BigNumber → Fraction conversion: potential loss of precision.`,\n\t})\n\treturn new Fraction(decimal.toNumber()).simplify()\n}\n\nfunction numberToDecimal(n: number): Decimal {\n\tmessages.push({\n\t\tid: v4(),\n\t\tlevel: MessageLevel.WARNING,\n\t\tmessage: `Number → BigNumber conversion: potential loss of precision.`,\n\t})\n\treturn new Decimal(n)\n}\n\nfunction numberToFraction(n: number): Fraction {\n\tmessages.push({\n\t\tid: v4(),\n\t\tlevel: MessageLevel.WARNING,\n\t\tmessage: `Number → Fraction conversion: potential loss of precision.`,\n\t})\n\treturn new Fraction(n)\n}\n\n// eslint-disable-next-line\nfunction decimalToNumber(d: Decimal): number {\n\tmessages.push({\n\t\tid: v4(),\n\t\tlevel: MessageLevel.WARNING,\n\t\tmessage: `Decimal → Number conversion: potential loss of precision.`,\n\t})\n\treturn d.toNumber()\n}\n\n// eslint-disable-next-line\nfunction fractionToNumber(f: Fraction): number {\n\tmessages.push({\n\t\tid: v4(),\n\t\tlevel: MessageLevel.WARNING,\n\t\tmessage: `Fraction → Number conversion: potential loss of precision.`,\n\t})\n\treturn f.valueOf()\n}\n","export enum InputAreaFocusTarget {\n\tNAME,\n\tEXP,\n}\n\nexport type TInputAreaFocus = null | ((t: InputAreaFocusTarget) => void)\n\nexport let inputAreaFocus: TInputAreaFocus = null\n\nexport function setInputAreaFocus(v: TInputAreaFocus) {\n\tinputAreaFocus = v\n}\n","import { v4 } from 'uuid'\nimport { Format } from '../model/Format'\nimport { inputAreaFocus, InputAreaFocusTarget } from '../model/inputAreaFocus'\nimport { NumberType } from '../model/NumberType'\nimport { FieldsStore } from '../store/FieldsStore'\nimport { evaluateFields } from './evaluateFields'\n\nexport function makeNewField() {\n\tFieldsStore.update((s, o) => {\n\t\tlet format = Format.DECIMAL\n\t\tlet numberType = NumberType.DECIMAL\n\t\tif (o.selectedFieldId) {\n\t\t\tconst field = o.fieldsById[o.selectedFieldId]\n\t\t\tformat = field.format\n\t\t\tnumberType = field.numberType\n\t\t}\n\t\tconst id = `field_${v4().replace(/-/g, '_')}`\n\t\ts.fieldsOrder.push(id)\n\t\ts.fieldsById[id] = {\n\t\t\tid: id,\n\t\t\tname: `r${s.nextFieldIndex++}`,\n\t\t\tvalue: '',\n\t\t\texpression: '',\n\t\t\tformat: format,\n\t\t\tnumberType: numberType,\n\t\t}\n\t\ts.selectedFieldId = id\n\t})\n\tevaluateFields()\n\trequestAnimationFrame(() => {\n\t\tinputAreaFocus?.(InputAreaFocusTarget.NAME)\n\t})\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10zm0 1A6 6 0 1 0 8 2a6 6 0 0 0 0 12z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\"\n});\n\nvar SvgBullseye = function SvgBullseye(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgBullseye, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/bullseye.5fd16e6e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"\n});\n\nvar SvgCircle = function SvgCircle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgCircle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/circle.2334252a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M9.5 1h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z\"\n});\n\nvar SvgClipboard = function SvgClipboard(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgClipboard, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/clipboard.1f5886c2.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"\n});\n\nvar SvgEdit = function SvgEdit(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgEdit, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/edit.07b7cda8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"\n});\n\nvar SvgExclamationCircleFill = function SvgExclamationCircleFill(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgExclamationCircleFill, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/exclamation-circle-fill.5eccd5ec.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z\"\n});\n\nvar SvgExclamationTriangle = function SvgExclamationTriangle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 17 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgExclamationTriangle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/exclamation-triangle.a4779114.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"\n});\n\nvar SvgGripHorizontal = function SvgGripHorizontal(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgGripHorizontal, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/grip-horizontal.dec9d481.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M0 8a.5.5 0 0 1 .5-.5h15a.5.5 0 0 1 0 1H.5A.5.5 0 0 1 0 8z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4 3h8a1 1 0 0 1 1 1v2.5h1V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v2.5h1V4a1 1 0 0 1 1-1zM3 9.5H2V12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9.5h-1V12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V9.5z\"\n});\n\nvar SvgHr = function SvgHr(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgHr, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/hr.330ceb43.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588z\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"circle\", {\n  cx: 8,\n  cy: 4.5,\n  r: 1\n});\n\nvar SvgInfoSquare = function SvgInfoSquare(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgInfoSquare, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/info-square.650895c4.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"\n});\n\nvar SvgPlus = function SvgPlus(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgPlus, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/plus.8c92226d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"\n});\n\nvar SvgX = function SvgX(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16 16\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgX, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/x.8a34b177.svg\";\nexport { ForwardRef as ReactComponent };","export let enterValue: ((v: string) => void) | null = null\n\nexport function setEnterValue(fn: ((v: string) => void) | null) {\n\tenterValue = fn\n}\n","import { css } from 'emotion/macro'\n\nexport const rowCss = css({\n\tdisplay: 'flex',\n})\n\nexport const rowAutoCss = css({\n\tdisplay: 'flex',\n\toverflow: 'auto',\n})\n\nexport const rowWrapCss = css({\n\tdisplay: 'flex',\n\tflexWrap: 'wrap',\n})\n\nexport const rowAutoWrapCss = css({\n\tdisplay: 'flex',\n\toverflow: 'auto',\n\tflexWrap: 'wrap',\n})\n","import { css, cx } from 'emotion/macro'\nimport React, { FunctionComponent } from 'react'\n\nexport interface IconCompProps {\n\t_icon: FunctionComponent\n\t_title?: string\n\t_className?: string\n}\n\nexport function IconComp(props: IconCompProps) {\n\treturn (\n\t\t<i className={cx(iconCss, props._className)} title={props._title}>\n\t\t\t<props._icon />\n\t\t</i>\n\t)\n}\n\nconst iconCss = css({\n\tdisplay: 'inline-block',\n\tverticalAlign: `-3px`,\n\twidth: '16px',\n\theight: '16px',\n\n\tsvg: {\n\t\tfill: 'currentColor',\n\t},\n})\n","import { css, cx } from 'emotion/macro'\nimport React from 'react'\nimport { Draggable } from 'react-beautiful-dnd'\nimport { evaluateFields } from '../fun/evaluateFields'\nimport { enterValue } from '../model/enterValue'\nimport { ICON_SVG } from '../model/ICON_SVG'\nimport { inputAreaFocus, InputAreaFocusTarget } from '../model/inputAreaFocus'\nimport { MessageLevel } from '../model/MessageLevel'\nimport { FieldsStore } from '../store/FieldsStore'\nimport { rowAutoWrapCss } from '../style/class/rowCss'\nimport { Radius, White1, White4 } from '../style/styleConstants'\nimport { IconComp } from './IconComp'\n\nexport interface FieldCompProps {\n\t_fieldId: string\n\t_index: number\n}\n\nexport function FieldComp(props: FieldCompProps) {\n\tconst selectedFieldId = FieldsStore.useState((s) => s.selectedFieldId)\n\tconst field = FieldsStore.useState((s) => s.fieldsById[props._fieldId])\n\tconst name = field.name || field.id\n\treturn (\n\t\t<Draggable draggableId={field.id} index={props._index}>\n\t\t\t{(provided, snapshot) => (\n\t\t\t\t<div\n\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\tfieldCss,\n\t\t\t\t\t\tselectedFieldId === props._fieldId && fieldSelectedCss,\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<div {...provided.dragHandleProps}>\n\t\t\t\t\t\t<IconComp _icon={ICON_SVG.grip} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={fieldNameCss}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (enterValue && e.ctrlKey) {\n\t\t\t\t\t\t\t\tenterValue(name)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tFieldsStore.update((s, o) => {\n\t\t\t\t\t\t\t\t\ts.selectedFieldId = props._fieldId\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\t\t\t\tinputAreaFocus?.(InputAreaFocusTarget.NAME)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{name}\n\t\t\t\t\t</button>{' '}\n\t\t\t\t\t={' '}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={valueCss}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tFieldsStore.update((s, o) => {\n\t\t\t\t\t\t\t\ts.selectedFieldId = props._fieldId\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\t\t\tinputAreaFocus?.(InputAreaFocusTarget.EXP)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{field.error ? 'ERROR' : field.value + '' || '–'}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tnavigator.clipboard.writeText(field.value + '')\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconComp _icon={ICON_SVG.copy} />\n\t\t\t\t\t</button>\n\t\t\t\t\t{field.hasDecimalValue && (\n\t\t\t\t\t\t<IconComp _icon={ICON_SVG.decimal} _title='Declares a BigNumber.' />\n\t\t\t\t\t)}\n\t\t\t\t\t{field.hasFractionValue && (\n\t\t\t\t\t\t<IconComp _icon={ICON_SVG.fraction} _title='Declares a Fraction.' />\n\t\t\t\t\t)}\n\t\t\t\t\t{field.hasNumberValue && (\n\t\t\t\t\t\t<IconComp _icon={ICON_SVG.number} _title='Declares a Number.' />\n\t\t\t\t\t)}\n\t\t\t\t\t{field.messages &&\n\t\t\t\t\t\tfield.messages.map((message) => (\n\t\t\t\t\t\t\t<IconComp\n\t\t\t\t\t\t\t\tkey={message.id}\n\t\t\t\t\t\t\t\t_icon={\n\t\t\t\t\t\t\t\t\tmessage.level === MessageLevel.ERROR\n\t\t\t\t\t\t\t\t\t\t? ICON_SVG.error\n\t\t\t\t\t\t\t\t\t\t: message.level === MessageLevel.WARNING\n\t\t\t\t\t\t\t\t\t\t? ICON_SVG.warning\n\t\t\t\t\t\t\t\t\t\t: ICON_SVG.info\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t_title={message.message}\n\t\t\t\t\t\t\t\t_className={\n\t\t\t\t\t\t\t\t\tmessage.level === MessageLevel.ERROR\n\t\t\t\t\t\t\t\t\t\t? errorCss\n\t\t\t\t\t\t\t\t\t\t: message.level === MessageLevel.WARNING\n\t\t\t\t\t\t\t\t\t\t? warningCss\n\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t<button\n\t\t\t\t\t\tstyle={{ marginLeft: 'auto' }}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tFieldsStore.update((s, o) => {\n\t\t\t\t\t\t\t\ts.selectedFieldId = undefined\n\t\t\t\t\t\t\t\tdelete s.fieldsById[field.id]\n\t\t\t\t\t\t\t\tconst index = o.fieldsOrder.indexOf(field.id)\n\t\t\t\t\t\t\t\tif (index >= 0) s.fieldsOrder.splice(index, 1)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tevaluateFields()\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<IconComp _icon={ICON_SVG.delete} />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Draggable>\n\t)\n}\n\nconst fieldCss = cx(\n\trowAutoWrapCss,\n\tcss({\n\t\tflex: 'none',\n\t\tborderRadius: `calc(${Radius} + 0.5rem)`,\n\t\tborder: `1px solid ${White4}`,\n\t\tpadding: `0.5rem`,\n\t\tgap: '0.5rem',\n\t\talignItems: 'center',\n\t}),\n)\n\nconst fieldSelectedCss = css({\n\tbackgroundColor: White1,\n})\n\nconst fieldNameCss = css({\n\tfontFamily: 'monospace',\n\tcolor: 'white',\n\ttextAlign: 'left',\n})\n\nconst valueCss = css({\n\tfontFamily: 'monospace',\n\tfontWeight: 'bold',\n\tcolor: 'white',\n\ttextAlign: 'left',\n})\n\nconst warningCss = css({\n\tcolor: 'peachpuff',\n})\n\nconst errorCss = css({\n\tcolor: 'hotpink',\n})\n","export const Gray1 = 'var(--Gray-1)'\nexport const Gray2 = 'var(--Gray-2)'\nexport const Gray3 = 'var(--Gray-3)'\nexport const Gray4 = 'var(--Gray-4)'\nexport const Gray5 = 'var(--Gray-5)'\nexport const Gray6 = 'var(--Gray-6)'\nexport const Gray7 = 'var(--Gray-7)'\nexport const Gray8 = 'var(--Gray-8)'\nexport const Gray9 = 'var(--Gray-9)'\nexport const Gray10 = 'var(--Gray-10)'\n\nexport const Green1 = 'var(--Green-1)'\nexport const Green2 = 'var(--Green-2)'\nexport const Green3 = 'var(--Green-3)'\nexport const Green4 = 'var(--Green-4)'\nexport const Green5 = 'var(--Green-5)'\nexport const Green6 = 'var(--Green-6)'\nexport const Green7 = 'var(--Green-7)'\nexport const Green8 = 'var(--Green-8)'\nexport const Green9 = 'var(--Green-9)'\nexport const Green10 = 'var(--Green-10)'\n\nexport const Red1 = 'var(--Red-1)'\nexport const Red2 = 'var(--Red-2)'\nexport const Red3 = 'var(--Red-3)'\nexport const Red4 = 'var(--Red-4)'\nexport const Red5 = 'var(--Red-5)'\nexport const Red6 = 'var(--Red-6)'\nexport const Red7 = 'var(--Red-7)'\nexport const Red8 = 'var(--Red-8)'\nexport const Red9 = 'var(--Red-9)'\nexport const Red10 = 'var(--Red-10)'\n\nexport const Blue1 = 'var(--Blue-1)'\nexport const Blue2 = 'var(--Blue-2)'\nexport const Blue3 = 'var(--Blue-3)'\nexport const Blue4 = 'var(--Blue-4)'\nexport const Blue5 = 'var(--Blue-5)'\nexport const Blue6 = 'var(--Blue-6)'\nexport const Blue7 = 'var(--Blue-7)'\nexport const Blue8 = 'var(--Blue-8)'\nexport const Blue9 = 'var(--Blue-9)'\nexport const Blue10 = 'var(--Blue-10)'\n\nexport const Teal1 = 'var(--Teal-1)'\nexport const Teal2 = 'var(--Teal-2)'\nexport const Teal3 = 'var(--Teal-3)'\nexport const Teal4 = 'var(--Teal-4)'\nexport const Teal5 = 'var(--Teal-5)'\nexport const Teal6 = 'var(--Teal-6)'\nexport const Teal7 = 'var(--Teal-7)'\nexport const Teal8 = 'var(--Teal-8)'\nexport const Teal9 = 'var(--Teal-9)'\nexport const Teal10 = 'var(--Teal-10)'\n\nexport const Orange1 = 'var(--Orange-1)'\nexport const Orange2 = 'var(--Orange-2)'\nexport const Orange3 = 'var(--Orange-3)'\nexport const Orange4 = 'var(--Orange-4)'\nexport const Orange5 = 'var(--Orange-5)'\nexport const Orange6 = 'var(--Orange-6)'\nexport const Orange7 = 'var(--Orange-7)'\nexport const Orange8 = 'var(--Orange-8)'\nexport const Orange9 = 'var(--Orange-9)'\nexport const Orange10 = 'var(--Orange-10)'\n\nexport const Black0 = 'var(--Black-0)'\nexport const Black1 = 'var(--Black-1)'\nexport const Black2 = 'var(--Black-2)'\nexport const Black3 = 'var(--Black-3)'\nexport const Black4 = 'var(--Black-4)'\nexport const Black5 = 'var(--Black-5)'\nexport const Black6 = 'var(--Black-6)'\nexport const Black7 = 'var(--Black-7)'\nexport const Black8 = 'var(--Black-8)'\nexport const Black9 = 'var(--Black-9)'\nexport const Black = 'var(--Black)'\n\nexport const White0 = 'var(--White-0)'\nexport const White1 = 'var(--White-1)'\nexport const White2 = 'var(--White-2)'\nexport const White3 = 'var(--White-3)'\nexport const White4 = 'var(--White-4)'\nexport const White5 = 'var(--White-5)'\nexport const White6 = 'var(--White-6)'\nexport const White7 = 'var(--White-7)'\nexport const White8 = 'var(--White-8)'\nexport const White9 = 'var(--White-9)'\nexport const White = 'var(--White)'\n\nexport const FontSizeNormal = 'var(--FontSize-Normal)'\n\nexport const FontSizeH6 = `var(--FontSize-H6)`\nexport const FontSizeH5 = `var(--FontSize-H5)`\nexport const FontSizeH4 = `var(--FontSize-H4)`\nexport const FontSizeH3 = `var(--FontSize-H3)`\nexport const FontSizeH2 = `var(--FontSize-H2)`\nexport const FontSizeH1 = `var(--FontSize-H1)`\n\nexport const FontSizeSmall = `var(--FontSize-Small)`\nexport const FontSizeTiny = `var(--FontSize-Tiny)`\n\nexport const LineHeightNormal = 'var(--LineHeight-Normal)'\n\nexport const ButtonPaddingTop = 'var(--ButtonPadding-Top)'\nexport const ButtonPaddingBottom = 'var(--ButtonPadding-Bottom)'\nexport const ButtonPaddingX = 'var(--ButtonPadding-X)'\nexport const ButtonPadding = `var(--ButtonPadding)`\n\nexport const Radius = 'var(--Radius)'\n\nexport const ShadowButton = `var(--Shadow-Button)`\n","import React, { useCallback, useState } from 'react'\nimport {\n\tDragDropContext,\n\tDroppable,\n\tOnDragEndResponder,\n} from 'react-beautiful-dnd'\nimport { v4 } from 'uuid'\nimport { evaluateFields } from '../fun/evaluateFields'\nimport { makeNewField } from '../fun/makeNewField'\nimport { ICON_SVG } from '../model/ICON_SVG'\nimport { FieldsStore } from '../store/FieldsStore'\nimport { FieldComp } from './FieldComp'\nimport { IconComp } from './IconComp'\n\nexport interface FieldsAreaCompProps {}\n\nexport function FieldsAreaComp(props: FieldsAreaCompProps) {\n\tconst [$id] = useState(() => v4())\n\tconst fieldIds = FieldsStore.useState((s) => s.fieldsOrder)\n\tconst onDragEnd = useCallback<OnDragEndResponder>((result) => {\n\t\tconst oldIndex = result.source.index\n\t\tconst newIndex = result.destination?.index\n\t\tif (newIndex != null) {\n\t\t\tFieldsStore.update((s, o) => {\n\t\t\t\tconst item = s.fieldsOrder[oldIndex]\n\t\t\t\tif (item) {\n\t\t\t\t\ts.fieldsOrder.splice(oldIndex, 1)\n\t\t\t\t\ts.fieldsOrder.splice(newIndex, 0, item)\n\t\t\t\t}\n\t\t\t})\n\t\t\tevaluateFields()\n\t\t}\n\t}, [])\n\treturn (\n\t\t<div className='p-col-auto' style={{ flex: `0px` }}>\n\t\t\t<div className='p-col-auto' style={{ padding: `1rem`, gap: `0.5rem` }}>\n\t\t\t\t<DragDropContext onDragEnd={onDragEnd}>\n\t\t\t\t\t<Droppable droppableId={$id}>\n\t\t\t\t\t\t{(provided, snapshot) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\tclassName='p-col'\n\t\t\t\t\t\t\t\tstyle={{ gap: `0.5rem` }}\n\t\t\t\t\t\t\t\t// style={{ backgroundColor: snapshot.isDraggingOver ? 'blue' : 'grey' }}\n\t\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{fieldIds.map((fieldId, index) => (\n\t\t\t\t\t\t\t\t\t<FieldComp key={fieldId} _fieldId={fieldId} _index={index} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Droppable>\n\t\t\t\t</DragDropContext>\n\t\t\t\t<button onClick={makeNewField}>\n\t\t\t\t\t<IconComp _icon={ICON_SVG.add} />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import { css } from 'emotion/macro'\n\nexport const colCss = css({\n\tdisplay: 'flex',\n\tflexDirection: 'column',\n})\n\nexport const colAutoCss = css({\n\tdisplay: 'flex',\n\tflexDirection: 'column',\n\toverflow: 'auto',\n})\n","import { css, cx } from 'emotion/macro'\nimport React, { RefObject, useLayoutEffect, useRef } from 'react'\nimport { evaluateFields } from '../fun/evaluateFields'\nimport { makeNewField } from '../fun/makeNewField'\nimport { setEnterValue } from '../model/enterValue'\nimport { Field } from '../model/Field'\nimport { Format } from '../model/Format'\nimport {\n\tInputAreaFocusTarget,\n\tsetInputAreaFocus,\n} from '../model/inputAreaFocus'\nimport { NumberType } from '../model/NumberType'\nimport { FieldsStore } from '../store/FieldsStore'\nimport { colAutoCss } from '../style/class/colCss'\nimport { rowAutoWrapCss } from '../style/class/rowCss'\nimport { FontSizeTiny, White6 } from '../style/styleConstants'\n\nexport interface InputAreaCompProps {}\n\nexport function InputAreaComp(props: InputAreaCompProps) {\n\tconst nameFieldRef = useRef<HTMLInputElement>(null)\n\tconst expFieldRef = useRef<HTMLInputElement>(null)\n\tconst selectedFieldId = FieldsStore.useState((s) => s.selectedFieldId)\n\tconst field = FieldsStore.useState(\n\t\t(s) => (selectedFieldId ? s.fieldsById[selectedFieldId] : undefined),\n\t\t[selectedFieldId],\n\t)\n\tfunction updateField<K extends keyof Field, V extends Field[K]>(\n\t\tkey: K,\n\t\tvalue: V,\n\t) {\n\t\tif (selectedFieldId) {\n\t\t\tFieldsStore.update((s) => {\n\t\t\t\tconst field = s.fieldsById[selectedFieldId]\n\t\t\t\tif (field) {\n\t\t\t\t\tfield[key] = value\n\t\t\t\t}\n\t\t\t})\n\t\t\tevaluateFields()\n\t\t}\n\t}\n\tuseLayoutEffect(() => {\n\t\tsetInputAreaFocus(focus.bind(null, nameFieldRef, expFieldRef))\n\t\treturn () => {\n\t\t\tsetInputAreaFocus(null)\n\t\t}\n\t}, [])\n\treturn (\n\t\t<div className={inputAreaCss}>\n\t\t\t<div className={labeledControlCss}>\n\t\t\t\t<div className={labelCss}>Name:</div>\n\t\t\t\t<input\n\t\t\t\t\tref={nameFieldRef}\n\t\t\t\t\tdisabled={field == null}\n\t\t\t\t\tclassName={nameFieldCss}\n\t\t\t\t\tvalue={field?.name ?? ''}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tupdateField(\n\t\t\t\t\t\t\t'name',\n\t\t\t\t\t\t\te.currentTarget.value.replace(\n\t\t\t\t\t\t\t\t/[-+*\\\\/\\s'\"`%!=^(),.;?:[\\]{}$#&@<>|~]/g,\n\t\t\t\t\t\t\t\t'_',\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t)\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={cx(labeledControlCss, expLabeledCss)}>\n\t\t\t\t<div className={labelCss}>Value:</div>\n\t\t\t\t<input\n\t\t\t\t\tref={expFieldRef}\n\t\t\t\t\tdisabled={field == null}\n\t\t\t\t\tclassName={expFieldCss}\n\t\t\t\t\tvalue={field?.expression ?? ''}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tupdateField('expression', e.currentTarget.value)\n\t\t\t\t\t}}\n\t\t\t\t\tonFocus={(e) => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetEnterValue(enterValue.bind(null, expFieldRef))\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}}\n\t\t\t\t\tonBlur={(e) => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetEnterValue(null)\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}}\n\t\t\t\t\tonKeyUp={(e) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\te.key === ')' &&\n\t\t\t\t\t\t\thasLessOpeningBrackets(e.currentTarget.value)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\te.currentTarget.value = '(' + e.currentTarget.value\n\t\t\t\t\t\t} else if (e.key === 'Enter') {\n\t\t\t\t\t\t\tmakeNewField()\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={labeledControlCss}>\n\t\t\t\t<div className={labelCss}>Number type:</div>\n\t\t\t\t<select\n\t\t\t\t\tdisabled={field == null}\n\t\t\t\t\tvalue={field?.numberType ?? NumberType.DECIMAL}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tupdateField('numberType', parseInt(e.currentTarget.value, 10))\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option value={NumberType.DECIMAL}>BigNumber</option>\n\t\t\t\t\t<option value={NumberType.FRACTION}>Fraction</option>\n\t\t\t\t\t<option value={NumberType.NUMBER}>Number</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className={labeledControlCss}>\n\t\t\t\t<div className={labelCss}>Format:</div>\n\t\t\t\t<select\n\t\t\t\t\tdisabled={field == null}\n\t\t\t\t\tvalue={field?.format ?? Format.DECIMAL}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tupdateField('format', parseInt(e.currentTarget.value, 10))\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option value={Format.DECIMAL}>0.0</option>\n\t\t\t\t\t<option value={Format.DECIMAL_WITH_REPEAT}>0.(0)</option>\n\t\t\t\t\t<option value={Format.FRACTION}>0/0</option>\n\t\t\t\t\t<option value={Format.FRACTION_WITH_WHOLE}>0 0/0</option>\n\t\t\t\t\t<option value={Format.PERCENT}>0%</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nconst inputAreaCss = cx(\n\trowAutoWrapCss,\n\tcss({\n\t\tpadding: `1rem`,\n\t\tgap: `0.5rem`,\n\t}),\n)\n\nconst nameFieldCss = css({\n\tfontFamily: 'monospace',\n\toverflow: 'hidden',\n\tmaxWidth: `18rem`,\n\ttextAlign: 'right',\n})\n\nconst expLabeledCss = css({\n\toverflow: 'hidden',\n\tflex: '1',\n\tminWidth: 'min(100%, max(18rem, 33%))',\n})\n\nconst expFieldCss = css({\n\tfontFamily: 'monospace',\n\toverflow: 'hidden',\n\tflex: '1',\n})\n\nconst labeledControlCss = cx(\n\tcolAutoCss,\n\tcss({\n\t\tgap: `1px`,\n\t}),\n)\n\nconst labelCss = css({\n\tfontSize: FontSizeTiny,\n\tcolor: White6,\n})\n\nfunction enterValue(expFieldRef: RefObject<HTMLInputElement>, v: string) {\n\tFieldsStore.update((s, o) => {\n\t\tif (expFieldRef.current && o.selectedFieldId) {\n\t\t\tconst field = s.fieldsById[o.selectedFieldId]\n\t\t\tif (field) {\n\t\t\t\tconst start = expFieldRef.current.selectionStart ?? 0\n\t\t\t\tconst end = expFieldRef.current.selectionEnd ?? 0\n\t\t\t\tlet value = expFieldRef.current.value\n\t\t\t\tvalue = value.slice(0, start) + v + value.slice(end)\n\t\t\t\texpFieldRef.current.value = value\n\t\t\t\texpFieldRef.current.focus()\n\t\t\t\texpFieldRef.current.setSelectionRange(\n\t\t\t\t\tstart + v.length,\n\t\t\t\t\tstart + v.length,\n\t\t\t\t)\n\t\t\t\tfield.expression = value\n\t\t\t}\n\t\t}\n\t})\n\tevaluateFields()\n}\n\nfunction focus(\n\tnameFieldRef: RefObject<HTMLInputElement>,\n\texpFieldRef: RefObject<HTMLInputElement>,\n\ttarget: InputAreaFocusTarget,\n) {\n\tswitch (target) {\n\t\tcase InputAreaFocusTarget.NAME:\n\t\t\tif (nameFieldRef.current) {\n\t\t\t\tnameFieldRef.current.focus()\n\t\t\t\tnameFieldRef.current.setSelectionRange(\n\t\t\t\t\t0,\n\t\t\t\t\tnameFieldRef.current.value.length,\n\t\t\t\t)\n\t\t\t}\n\t\t\tbreak\n\t\tcase InputAreaFocusTarget.EXP:\n\t\t\tif (expFieldRef.current) {\n\t\t\t\texpFieldRef.current.focus()\n\t\t\t\texpFieldRef.current.setSelectionRange(\n\t\t\t\t\t0,\n\t\t\t\t\texpFieldRef.current.value.length,\n\t\t\t\t)\n\t\t\t}\n\t\t\tbreak\n\t}\n}\n\nfunction hasLessOpeningBrackets(s: string) {\n\tconst openingCount = (s.match(/\\(/g) || []).length\n\tconst closingCount = (s.match(/\\)/g) || []).length\n\treturn openingCount < closingCount\n}\n","import React from 'react'\nimport { FieldsAreaComp } from './FieldsAreaComp'\nimport { InputAreaComp } from './InputAreaComp'\n\nexport interface AppCompProps {}\n\nexport function AppComp(props: AppCompProps) {\n\treturn (\n\t\t<div\n\t\t\tclassName='p-col-auto'\n\t\t\tstyle={{\n\t\t\t\tgap: `1px`,\n\t\t\t\twidth: `100%`,\n\t\t\t\theight: `100%`,\n\t\t\t}}\n\t\t>\n\t\t\t<FieldsAreaComp />\n\t\t\t<InputAreaComp />\n\t\t</div>\n\t)\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import 'normalize.css'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { AppComp } from './comp/AppComp'\nimport * as serviceWorker from './serviceWorker'\nimport './style/index.css'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<AppComp />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n)\n\nserviceWorker.register()\n"],"sourceRoot":""}